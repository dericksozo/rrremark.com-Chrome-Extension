{"version":3,"sources":["../src/content_script.js"],"names":[],"mappings":"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","file":"content_script.js","sourcesContent":["(function () {\n\n    var applicationId;\n    var coordinates = {}; // The coordinates, width, height, etc. captured from the mouse will go in here.\n    let EXTENSION_ACTIVE = false; // Determines whether the extension is on or off.\n    let ESC_KEY = 27; // The keycode for the escape key.\n\n    let overlay, // The overlay that's on top of the page when capturing mouse coordinates and after putting\n                //  the cropped image on the page.\n        croppedImage; // The cropped image element.\n\n    function captureMouseEvents() {\n\n        if ( ! EXTENSION_ACTIVE) {\n\n            EXTENSION_ACTIVE = true; // It's active, so don't turn it on anymore.\n\n            overlay = createOverlay();\n            // var crossHair = createCrossHair();\n\n            var isMouseDown = false;\n\n            var startX, startY;\n            var endX, endY;\n\n            /* Creating the Overlay element to be placed on the screen. */\n            function createOverlay() {\n\n                var overlay = window.document.createElement('div');\n                    overlay.style.position = 'fixed'; // allows it to move with scroll\n                    overlay.style.zIndex = '2174859';\n                    overlay.style.boxSizing = \"border-box\";\n                    overlay.style.top = '0px';\n                    overlay.style.left = '0px';\n                    overlay.style.padding = '0px';\n                    overlay.style.margin = '0px';\n                    overlay.style.width = window.innerWidth + \"px\";\n                    overlay.style.height = window.innerHeight + \"px\";\n                    overlay.style.backgroundColor = \"rgba(0, 0, 0, 0.3)\";\n\n                window.document.body.appendChild(overlay);\n\n                return overlay;\n            }\n\n            /* function createCrossHair() {\n                var crossHair = window.document.createElement('div');\n                    crossHair.style.position = \"fixed\";\n                    crossHair.style.width = window.innerWidth + \"px\";\n                    crossHair.style.height = window.innerHeight + \"px\";\n                    crossHair.style.zIndex = \"2174861\";\n\n                    crossHair.classList.add(\"ScreenshotApp--crossHair\");\n\n                window.document.body.appendChild(crossHair);\n\n                return crossHair;\n            } */\n\n            /* Events */\n            function mouseDown(e) {\n                isMouseDown = true;\n\n                startX = e.clientX;\n                startY = e.clientY;\n            }\n\n            function mouseMove(e) {\n\n                if (isMouseDown) {\n\n                    endY = e.clientY;\n                    endX = e.clientX;\n\n                    /* crossHair.style.left = e.clientX;\n                    crossHair.style.top = e.clientY; */\n\n                    overlay.style.backgroundColor = 'rgba(255, 255, 255, 0.05)';\n                    overlay.style.borderColor = \"rgba(0, 0, 0, 0.3)\";\n                    overlay.style.borderStyle = \"solid\";\n\n                    /* Change how the borderWidth is being calculated based on the x and y values. */\n                    if ( endX >= startX && endY >= startY) {\n\n                        // Appropriately normalize the coordinates so have an easier time cropping the image later.\n                        coordinates.startX = startX;\n                        coordinates.endX = endX;\n                        coordinates.startY = startY;\n                        coordinates.endY = endY;\n\n                        overlay.style.borderWidth = startY + \"px \" + (window.innerWidth - endX) + \"px \" + (window.innerHeight - endY) + \"px \" + startX + \"px\";\n\n                    } else if (endX <= startX && endY >= startY ){\n\n                        coordinates.startX = endX;\n                        coordinates.endX = startX;\n                        coordinates.startY = startY;\n                        coordinates.endY = endY;\n\n                        overlay.style.borderWidth = startY + \"px \" + (window.innerWidth - startX) + \"px \" + (window.innerHeight - endY) + \"px \" + endX + \"px\";\n                    } else if (endX >= startX && endY <= startY ) {\n\n                        coordinates.startX = startX;\n                        coordinates.endX = endX;\n                        coordinates.startY = endY;\n                        coordinates.endY = startY;\n\n                        overlay.style.borderWidth = endY + \"px \" + (window.innerWidth - endX) + \"px \" + (window.innerHeight - startY) + \"px \" + startX + \"px\";\n                    } else if (endX <= startX && endY <= startY) {\n\n                        coordinates.startX = endX;\n                        coordinates.endX = startX;\n                        coordinates.startY = endY;\n                        coordinates.endY = startY;\n\n                        overlay.style.borderWidth = endY + \"px \" + (window.innerWidth - startX) + \"px \" + (window.innerHeight - startY) + \"px \" + endX + \"px\";\n                    }\n\n                }\n            }\n\n            function mouseUp(e) {\n                isMouseDown = false;\n\n                console.log(\"Mouse up, now we're about to fire the chrome.runtime.sendMessage function.\");\n                chrome.runtime.sendMessage(applicationId, {action: \"takeScreenshot\"});\n            }\n\n            /* This function takes care of removing elements and events if the user hits ESC. */\n            function shutdown() {\n\n                // Remove event listeners from overlay.\n                overlay.addEventListener('mousedown', mouseDown, false);\n            \toverlay.addEventListener('mousemove', mouseMove, false);\n            \toverlay.addEventListener('mouseup', mouseUp, false);\n\n                // Remove overlay element from the document.\n                window.document.body.removeChild(overlay);\n\n                // Set the extension to false so we can open it again.\n                EXTENSION_ACTIVE = false;\n\n            }\n\n            /* Set up the events on overlay. */\n            overlay.addEventListener('mousedown', mouseDown, false);\n        \toverlay.addEventListener('mousemove', mouseMove, false);\n        \toverlay.addEventListener('mouseup', mouseUp, false);\n\n            /* Listening for the ESC key being pressed. */\n            window.document.addEventListener('keydown', (e) => {\n                let key = e.keyCode || e.which;\n\n                if ( key === ESC_KEY) {\n                    console.log(\"You pressed the escape key!\");\n                    shutdown();\n                }\n\n            }, false);\n        }\n\n    }\n\n    function screenShotComplete(imageData) {\n\n        var canvas = document.createElement('canvas');\n        var context = canvas.getContext('2d');\n        var imageObj = new Image();\n        console.log(\"What are the coordinates?\", coordinates);\n\n        // draw cropped image\n        imageObj.onload = () => {\n            var coordinatesWidth = coordinates.endX - coordinates.startX;\n            var coordinatesHeight = coordinates.endY - coordinates.startY;\n\n            var {startX, startY, endX, endY} = coordinates;\n\n            canvas.width = coordinatesWidth;\n            canvas.height = coordinatesHeight;\n\n            context.drawImage(imageObj, coordinates.startX, coordinates.startY, coordinatesWidth, coordinatesHeight, 0, 0, coordinatesWidth, coordinatesHeight);\n\n            /* if ( endX >= startX && endY >= startY) { // Dragging from Top left to bottom right\n                context.drawImage(imageObj, coordinates.startX, coordinates.startY, coordinatesWidth, coordinatesHeight, 0, 0, coordinatesWidth, coordinatesHeight);\n            } else if (endX <= startX && endY >= startY ) { // Dragging from top right to bottom left.\n\n                coordinatesWidth = coordinates.startX - coordinates.endX; // Reverse the way it's calculating the width\n                canvas.width = coordinatesWidth; // Set the new width of the canvas.\n                context.drawImage(imageObj, endX, startY, coordinatesWidth, coordinatesHeight, 0, 0, coordinatesWidth, coordinatesHeight);\n\n            } else if (endX >= startX && endY <= startY ) { // Dragging from bottom left to top right.\n\n                coordinatesHeight = coordinates.startY - coordinates.endY; // Reverse the way it's calculating the height.\n                canvas.height = coordinatesHeight;\n                context.drawImage(imageObj, startX, endY, coordinatesWidth, coordinatesHeight, 0, 0, coordinatesWidth, coordinatesHeight);\n\n            } else if (endX <= startX && endY <= startY) { // Dragging from bottom right to top left.\n\n                // Recalculate both the width and height.\n                coordinatesWidth = coordinates.startX - coordinates.endX;\n                coordinatesHeight = coordinates.startY - coordinates.endY;\n\n                canvas.width = coordinatesWidth;\n                canvas.height = coordinatesHeight;\n\n                context.drawImage(imageObj, endX, endY, coordinatesWidth, coordinatesHeight, 0, 0, coordinatesWidth, coordinatesHeight);\n            } */\n\n            // Pass the cropped image into the next step.\n            positionCroppedImage(canvas.toDataURL(\"image/png\"));\n        };\n\n        imageObj.src = imageData;\n    }\n\n    /* Positions the cropped image on the page and then animates it into the middle. */\n    function positionCroppedImage(imageSource) {\n\n        croppedImage = createImage();\n\n        function createImage() {\n            var image = new Image();\n\n            // draw cropped image\n            image.onload = () => {\n\n                image.style.position = \"fixed\"; // allows it to move with scroll\n                image.style.zIndex = \"2174869\";\n                image.style.boxSizing = \"border-box\";\n                image.style.display = \"block\";\n\n                // image.style.top = coordinates.startY + \"px\";\n                // image.style.left = coordinates.startX + \"px\";\n\n                image.style.top = \"0px\";\n                image.style.left = \"0px\";\n\n                console.log(\"What are the coordinates?\", coordinates);\n\n                // Place the image into the dom.\n                window.document.body.appendChild(image);\n\n            };\n\n            image.src = imageSource;\n        }\n    }\n\n    function onExtensionMessage(request, sender, sendResponse) {\n\n        // console.log(\"What's the request?\", request);\n        // console.log(\"What's the sender?\", sender);\n        // console.log(\"What's sendResponse\", sendResponse);\n\n        switch (request.action) {\n            case 'capture':\n                captureMouseEvents();\n                break;\n            case 'screenShotComplete':\n                console.log(\"We completed the screenshot!\");\n                screenShotComplete(request.imageData);\n                break;\n            default:\n                return;\n        }\n    }\n\n    function initialize() {\n        applicationId = chrome.i18n.getMessage('@@extension_id');\n        chrome.runtime.onMessage.addListener(onExtensionMessage);\n    }\n\n    initialize();\n\n})();"]}