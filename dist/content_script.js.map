{"version":3,"sources":["../src/content_script.js"],"names":[],"mappings":"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","file":"content_script.js","sourcesContent":["(function () {\n    var applicationId;\n    var coordinates = {}; // The coordinates, width, height, etc. captured from the mouse will go in here.\n    let EXTENSION_ACTIVE = false; // Determines whether the extension is on or off.\n    let ESC_KEY = 27; // The keycode for the escape key.\n\n    const CROSSHAIR_CLASS = \"Screenshot--crossHair\";\n\n    let overlay, // The overlay that's on top of the page when capturing mouse coordinates and after putting\n                //  the cropped image on the page.\n        croppedImage, // The cropped image element.\n        container;\n\n    function captureMouseEvents() {\n\n        if ( ! EXTENSION_ACTIVE) {\n\n            EXTENSION_ACTIVE = true; // It's active, so don't turn it on anymore.\n\n            overlay = createOverlay();\n            container = cre('iframe', {\n                style: {\n                    // This is really just paranoia, but we want to be above\n                    //          *** ABSOLUTELY EVERYTHING. ***\n                    // If the content document has fixed elements with high z-indexes, well,\n                    // we just have to use z-indexes that are higher!\n                    // http://stackoverflow.com/questions/491052/mininum-and-maximum-value-of-z-index\n                    zIndex: 0x7FFFFFFF,\n                    boxSizing: 'border-box',\n                    top: '0',\n                    left: '0',\n                    right: '0',\n                    bottom: '0',\n                    margin: '0',\n                    padding: '0',\n                    border: 'none',\n                    background: 'transparent'\n                }\n            });\n\n            // var $crossHair = createCrossHair();\n\n            var isMouseDown = false;\n\n            var startX, startY;\n            var endX, endY;\n\n            /* Creating the Overlay element to be placed on the screen. */\n            function createOverlay() {\n                var overlay = container.contentDocument.createElement('div');\n                    overlay.style.position = 'fixed'; // allows it to move with scroll\n                    overlay.style.boxSizing = \"border-box\";\n                    overlay.style.top = '0';\n                    overlay.style.left = '0';\n                    overlay.style.right = '0';\n                    overlay.style.bottom = '0';\n                    overlay.style.padding = '0';\n                    overlay.style.margin = '0';\n                    /* overlay.style.width = window.innerWidth + \"px\";\n                    overlay.style.height = window.innerHeight + \"px\"; */\n                    overlay.style.backgroundColor = \"rgba(0, 0, 0, 0.3)\";\n\n                container.contentDocument.body.appendChild(overlay);\n                return overlay;\n            }\n\n            /* function createCrossHair() {\n\n                var $crossHair = $(\"<div/>\");\n\n                $crossHair.addClass(\"ScreenshotApp--crossHair\");\n\n                $(\"body\").append($crossHair);\n\n                return $crossHair;\n            } */\n\n            /* Events */\n            function mouseDown(e) {\n                isMouseDown = true;\n\n                startX = e.clientX;\n                startY = e.clientY;\n            }\n\n            function mouseMove(e) {\n\n                if (isMouseDown) {\n\n                    endY = e.clientY;\n                    endX = e.clientX;\n\n                    /* crossHair.style.left = e.clientX;\n                    crossHair.style.top = e.clientY; */\n\n                    overlay.style.backgroundColor = 'rgba(255, 255, 255, 0.05)';\n                    overlay.style.borderColor = \"rgba(0, 0, 0, 0.3)\";\n                    overlay.style.borderStyle = \"solid\";\n\n                    /* Change how the borderWidth is being calculated based on the x and y values. */\n                    if ( endX >= startX && endY >= startY) {\n\n                        // Appropriately normalize the coordinates so have an easier time cropping the image later.\n                        coordinates.startX = startX;\n                        coordinates.endX = endX;\n                        coordinates.startY = startY;\n                        coordinates.endY = endY;\n\n                        overlay.style.borderWidth = startY + \"px \" + (window.innerWidth - endX) + \"px \" + (window.innerHeight - endY) + \"px \" + startX + \"px\";\n\n                    } else if (endX <= startX && endY >= startY ){\n\n                        coordinates.startX = endX;\n                        coordinates.endX = startX;\n                        coordinates.startY = startY;\n                        coordinates.endY = endY;\n\n                        overlay.style.borderWidth = startY + \"px \" + (window.innerWidth - startX) + \"px \" + (window.innerHeight - endY) + \"px \" + endX + \"px\";\n                    } else if (endX >= startX && endY <= startY ) {\n\n                        coordinates.startX = startX;\n                        coordinates.endX = endX;\n                        coordinates.startY = endY;\n                        coordinates.endY = startY;\n\n                        overlay.style.borderWidth = endY + \"px \" + (window.innerWidth - endX) + \"px \" + (window.innerHeight - startY) + \"px \" + startX + \"px\";\n                    } else if (endX <= startX && endY <= startY) {\n\n                        coordinates.startX = endX;\n                        coordinates.endX = startX;\n                        coordinates.startY = endY;\n                        coordinates.endY = startY;\n\n                        overlay.style.borderWidth = endY + \"px \" + (window.innerWidth - startX) + \"px \" + (window.innerHeight - startY) + \"px \" + endX + \"px\";\n                    }\n\n                }\n            }\n\n            function mouseUp(e) {\n                isMouseDown = false;\n\n                console.log(\"Mouse up, now we're about to fire the chrome.runtime.sendMessage function.\");\n                chrome.runtime.sendMessage(applicationId, {action: \"takeScreenshot\"});\n            }\n\n            /* This function takes care of removing elements and events if the user hits ESC. */\n            function shutdown() {\n\n                // Remove the iframe from the document\n                window.document.body.removeChild(container);\n\n                // Set the extension to false so we can open it again.\n                EXTENSION_ACTIVE = false;\n\n            }\n\n            /* Set up the events on overlay. */\n            overlay.addEventListener('mousedown', mouseDown, false);\n        \toverlay.addEventListener('mousemove', mouseMove, false);\n        \toverlay.addEventListener('mouseup', mouseUp, false);\n\n            /* Listening for the ESC key being pressed. */\n            window.document.addEventListener('keydown', (e) => {\n                let key = e.keyCode || e.which;\n\n                if ( key === ESC_KEY) {\n                    console.log(\"You pressed the escape key!\");\n                    shutdown();\n                }\n\n            }, false);\n        }\n\n    }\n\n    function screenShotComplete(imageData) {\n\n        const canvas = document.createElement('canvas'),\n              context = canvas.getContext('2d'),\n              imageObj = new Image();\n\n        // draw cropped image\n        imageObj.onload = () => {\n\n            let coordinatesWidth = coordinates.endX - coordinates.startX;\n            let coordinatesHeight = coordinates.endY - coordinates.startY;\n\n            let {startX, startY, endX, endY} = coordinates;\n\n            canvas.width = coordinatesWidth;\n            canvas.height = coordinatesHeight;\n\n            context.drawImage(imageObj, coordinates.startX, coordinates.startY, coordinatesWidth, coordinatesHeight, 0, 0, coordinatesWidth, coordinatesHeight);\n\n            // Pass the cropped image into the next step.\n            positionCroppedImage(canvas.toDataURL(\"image/png\"));\n        };\n\n        imageObj.src = imageData;\n    }\n\n    /* Positions the cropped image on the page and then animates it into the middle. */\n    function positionCroppedImage(imageSource) {\n\n        createImage();\n\n\n        function createImage() {\n            var image = new Image();\n\n            // draw cropped image\n            image.onload = () => {\n\n                image.style.position = \"fixed\"; // allows it to move with scroll\n                image.style.zIndex = \"2174869\";\n                image.style.boxSizing = \"border-box\";\n                image.style.display = \"block\";\n\n                // image.style.top = coordinates.startY + \"px\";\n                // image.style.left = coordinates.startX + \"px\";\n\n                image.style.top = coordinates.startY + \"px\";\n                image.style.left = coordinates.startX + \"px\";\n\n                // Place the image into the dom.\n                window.document.body.appendChild(image);\n\n                croppedImage = image;\n                positionElements();\n            };\n\n            image.src = imageSource;\n        }\n\n        /* Removes all border width from overlay and fades it to white. Positions the image in the middle of\n           the screen. */\n        function positionElements() {\n\n            let transform = 'translate3d(-50%,0,0) translateZ(0)';\n            let croppedImageTransform = \"translateZ(0)\";\n            let transition = \"all 500ms cubic-bezier(0.455, 0.030, 0.515, 0.955)\";\n\n            overlay.style.border = \"none\";\n            overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.3)';\n            overlay.style.webkitTransition = transition;\n            overlay.style.transition = transition;\n            // This will animate to white over the period of 1 second.\n            overlay.style.backgroundColor = 'rgba(255, 255, 255, 1)';\n\n            croppedImage.style.boxShadow = \"5px 5px 10px rgba(0, 0, 0, 0.5)\";\n            croppedImage.style.maxWidth = \"90%\";\n            croppedImage.style.maxHeight = \"50%\";\n\n            $(croppedImage).animate({\n                top: 10,\n                left: ( $(window).width() / 2 ) - ( $(croppedImage).outerWidth()  / 2 )\n            }, 250, \"easeOutQuad\");\n\n            // createAndPositionInputs();\n        }\n\n        function createAndPositionInputs() {\n\n\n            let transform = 'translate3d(-50%,0,0) translateZ(0)';\n            let transition = \"all 500ms cubic-bezier(0.455, 0.030, 0.515, 0.955)\";\n\n            var textArea = document.createElement('textarea');\n\n            textArea.style.position = \"fixed\";\n            textArea.style.top = (parseInt(croppedImage.style.top.split(\"px\")[0], 10) + croppedImage.offsetHeight) + \"px\";\n            textArea.style.left = \"50%\";\n            textArea.style.transform = transform;\n            textArea.style.webkitTransform = transform;\n            textArea.style.zIndex = \"2174889\";\n            textArea.style.boxSizing = \"border-box\";\n            textArea.style.display = \"block\";\n\n            textArea.style.transition = transition;\n            textArea.style.webkitTransition = transition;\n\n            window.document.body.appendChild(textArea);\n        }\n    }\n\n    function onExtensionMessage(request, sender, sendResponse) {\n\n        // console.log(\"What's the request?\", request);\n        // console.log(\"What's the sender?\", sender);\n        // console.log(\"What's sendResponse\", sendResponse);\n\n        switch (request.action) {\n            case 'capture':\n                captureMouseEvents();\n                break;\n            case 'screenShotComplete':\n                console.log(\"We completed the screenshot!\");\n                screenShotComplete(request.imageData);\n                break;\n            default:\n                return;\n        }\n    }\n\n    function initialize() {\n        applicationId = chrome.i18n.getMessage('@@extension_id');\n        chrome.runtime.onMessage.addListener(onExtensionMessage);\n    }\n\n    initialize();\n\n})();"]}